<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>OpenTelemetry</title>

    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/monokai.min.css">-->
    <link rel="stylesheet" href="./css/reset.min.css">
    <link rel="stylesheet" href="./css/reveal.min.css">
    <link rel="stylesheet" href="./css/monokai.min.css">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <section class="section-title" data-background-image="./assets/intro.jpg" style="display: block;">
                <h1 style="color: #1973eb;">OpenTelemetry en Production</h1>
                <h3 style="color: #000;">REX d'un Voyage Vers l'Observabilit√© Moderne</h3>
				<br><br>
				<img src="./assets/cloud_nord.png" style="width: 20%;">
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <p>Who am I</p>
                <h1>Maximilien Chevalier</h1>
                <img src="./assets/max.png" class="img-right">
                <ul>
                    <li><img src="./assets/axa.svg"  style="width: 2%;""> Staff Engineer @ Axa France</li>
					<li>üéì Enseignant vacataire @ Universit√© de Lille</li>
                    <li>üçÉ Spring Boot lover</li>
                    <li>üêã Kubernetes adopter</li>
                    <li><img src="./assets/linkedin.svg" style="width: 2%;"> Maximilien Chevalier</li>
                </ul>
            </section>
			<section class="section-conclusion center">
				<h1 style="color: #1973eb;">Pourquoi OpenTelemetry ?</h1>
                <aside class="notes">
                    <ul>
                        <li>Vous vous √™tes s√ªrement demand√© si OpenTelemetry est fait pour vous.</li>
                        <li>Vous vous demandez comment l'adopter dans votre environnement.</li>
                        <li>Vous vous demandez quels sont les avantages et les inconv√©nients d'OpenTelemetry.</li>
                        <li>Vous vous demandez comment convaincre votre √©quipe de l'adopter.</li>
                    </ul>
                </aside>
            </section>
        </section>
        <section>
            <section style="display: block;">
                <h1 style="color: #1973eb;">C'est quoi l'Observabilit√© ?</h1>
                <img src="./assets/observability.png" class="img-right visible">
                <p>L'observabilit√© : c'est la capacit√© de comprendre l'√©tat interne des syst√®mes en examinant ses sorties.</p>
                <ul>
                    <li>Les 3 piliers :
                        <ul>
                            <li>metrics</li>
                            <li>traces</li>
                            <li>logs</li>
                        </ul>
                    </li>
                </ul>
                <ul style="font-size: 0.7em">* :
                    <li>SM = System Monitoring</li>
                    <li>APM = Application Performance Monitoring</li>
                    <li>RUM = Real User Monitoring</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>D√©finition globale </li>
                        <li>Les 3 pillars de l'observabilit√© : traces, logs et m√©triques</li>
                        <li>"Observabilit√©" vous permet de comprendre un syst√®me de l'ext√©rieur en vous permettant de poser des questions sur ce syst√®me sans conna√Ætre son fonctionnement interne.</li>
                        <li>De plus, cela vous permet de r√©soudre facilement et de g√©rer des probl√®mes nouveaux, c'est-√†-dire des "inconnus inconnus". Cela vous aide √©galement √† r√©pondre √† la question "Pourquoi cela se produit-il?".</li>
                    </ul>
                </aside>
            </section>
            <section class="section-title" data-background-image="./assets/metrics.jpg" style="display: block;">
                <h1 style="color: #1973eb;">Metrics</h1>
                <ul>
                    <li>Exemples :
                        <ul>
                            <li>Le taux d'utilisation CPU</li>
                            <li>m√©moire consomm√©e</li>
                            <li>temps de r√©ponse</li>
                            <li>taux d'erreur/de succ√®s<br>(nb de requ√™tes OK/KO<br>sur une plage de temps donn√©e)</li>
                            <li>...</li>
                        </ul>
                    </li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Quantitatif !</li>
                        <li>Les m√©triques sont des mesures quantitatives qui fournissent des informations sur les performances, l'utilisation des ressources et le comportement des syst√®mes informatiques</li>
                        <li>Elles sont utilis√©es pour surveiller, analyser et optimiser les syst√®mes, et comprennent des donn√©es telles que le temps de r√©ponse, le d√©bit, l'utilisation du CPU, la consommation de m√©moire, etc.</li>
                        <li>Types de m√©triques:
                            <ul>
                                <li>COUNT</li>
                                <li>RATE</li>
                                <li>GAUGE</li>
                                <li>SET</li>
                                <li>HISTOGRAM</li>
                                <li>DISTRIBUTION</li>
                            </ul>
                        </li>
                    </ul>
                </aside>
            </section>
            <section class="section-title" data-background-image="./assets/metrics_health.jpg" style="display: block;">
                <h1 style="color: #1973eb;">L'√©tat de sant√©<br>de son application</h1>
                <aside class="notes">
                    <ul>
                        <li>analogie avec le pouls, la tension, ...</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1>Traces</h1>
                <img src="./assets/traces.png" class="img-full">
                <aside class="notes">
                    <ul>
                        <li>Le tracing (ou tra√ßage) consiste √† suivre le cheminement d'une requ√™te ou d'une transaction √† travers un syst√®me distribu√©.</li>
                        <li>Cela permet de visualiser et d'analyser le flux des requ√™tes √† travers les diff√©rents composants d'une application, ce qui est utile pour diagnostiquer les goulots d'√©tranglement, les performances et les comportements inattendus.</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">Vue hi√©rarchique d'un processus</h1>
                <img src="./assets/traces_analogy.jpg" class="img-right visible" style="width: 35%">
                <p>Une trace a toujours un parent</p>
                <p>Une trace correspond √† une requ√™te ou une transaction pour un utilisateur donn√©e √† travers un syst√®me distribu√©</p>
            </section>
            <section>
                <h1>Logs</h1>
                <img src="./assets/logs.png" class="img-full">
                <aside class="notes">
                    <ul>
                        <li>Les logs sont des enregistrements chronologiques des √©v√©nements et des actions qui se produisent dans un syst√®me informatique. Ils fournissent une tra√ßabilit√© des op√©rations, des erreurs, des avertissements et d'autres
                            informations utiles pour le d√©bogage, la surveillance et l'analyse des syst√®mes.
                        </li>
                    </ul>
                </aside>
            </section>
            <section class="section-title" data-background-image="./assets/logs_analogy.JPG" style="display: block;">
                <h1 style="color: #1973eb;">Les logs<br>repr√©sentent<br>des √©v√®nements applicatifs</h1>
            </section>
            <section class="section-title" data-background-image="./assets/tracestologstometrics.png" style="display: block;">
                <h1 style="color: #1973eb;">Correlation Metrics, Logs & Traces</h1>
                <ul>
                    <li>Traces to Logs</li>
                    <li>Logs to Metrics</li>
                    <li>Metrics to Traces</li>
                </ul>
                <aside class="notes">
                    TraceId vs axa-correlation-id
                </aside>
            </section>
        </section>
        <section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>OpenTelemetry, c'est quoi ?</h1>
                <img src="./assets/opentelemetry.svg" class="img-full">
                <aside class="notes">
                </aside>
            </section>
            <section style="display: block;">
                <h1 style="color: #1973eb;">CNCF üöÖ</h1>
                <img src="./assets/CNCF_Logo.jpg" class="img-center">
                <img src="./assets/cncf_observability.png" class="img-center">
                <aside class="notes">
                    <ul>
                        <li>Projet faisant partie de la Linux Foundation</li>
                        <li>Incubateur de projet</li>
                        <li>C'est une initative Opensource, vendor-neutral pour autour des applications sur le cloud</li>
                        <li>First was Kubernetes, CNCF foundation was announced alongside Kubernetes 1.0</li>
                        <li>And second project was Prometheus</li>
                        <li>The Cloud Native Computing Foundation (CNCF) is a Linux Foundation project that was started in 2015 to help advance container technology and align the tech industry around its evolution.</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1>V√©locit√© </h1>
                <img src="./assets/velocity.png" class="img-full" style="width: 70%;">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">OpenTelemetry</h1>
                <ul>
                    <li>un standard (W3C compliant)</li>
                    <li>un protocole</li>
                    <li>des librairies et SDK (multi-langages)</li>
                    <li>des outils (Collector)</li>
                </ul>
            </section>
            <section class="section-title" data-background-image="./assets/otlp.jpg" style="display: block;">
                <h1 style="color: #1973eb;">OTLP est le HTTP<br>de l'observabilit√©</h1>
            </section>
        </section>
        <section>
            <section class="section-title" data-background-image="./assets/enterprise.jpg" style="display: block;">
                <h1 style="color: #1973eb;">Axa FR et l'Observabilit√©</h1>
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>Plein de solutions diff√©rentes</h1>
                <table>
                    <tr>
                        <td style="border-bottom: none;"><img src="./assets/dynatrace.jpg" width="300px;"></td>
                        <td style="border-bottom: none;"><img src="./assets/appinsights.png" width="300px;"></td>
                        <td style="border-bottom: none;"><img src="./assets/vigi_logo.png" width="320px;"></td>
                        <td style="border-bottom: none;"><img src="./assets/EOS.png" width="320px;"></td>
                    </tr>
                </table>
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>Dynatrace</h1>
                <img src="./assets/dynatrace.jpg" class="img-right visible">
                <ul>
                    <li>Gourmand en ressources</li>
                    <li>Agent intrusif</li>
                    <li>Uniquement pour les syst√®mes critiques</li>
                </ul>
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>AppInsights</h1>
                <img src="./assets/appinsights.png" class="img-right visible">
                <ul>
                    <li>Hyper bien int√©gr√© au sein des assets Azure</li>
                    <li>Support OpenTelemetry pour exporter les data</li>
                    <li>Surcouche √† l'agent OpenTelementry</li>
                    <li>Vendor locking</li>
                </ul>
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>Vigi</h1>
                <img src="./assets/vigi_logo.png" class="img-right visible">
                <ul>
                    <li>Application historique d√©velopp√©e en interne</li>
                    <li>Configuration manuelle</li>
                    <li>Mode scrap pour brancher les syst√®mes/application</li>
                </ul>
            </section>
            <section data-markdown="" data-markdown-parsed="true" class="present" style="display: block;">
                <h1>EOS / OSIA (Outil de Suivi Inter-Applicatif)</h1>
                <img src="./assets/OSIA.png" class="img-right visible">
                <ul>
                    <li>axa-correlation-id / axa-feature-name / axa-feature-id</li>
                    <li>format de logs standard : {Timestamp};{MachineName};{ThreadName};{RequestId};{Severity};{ApplicativeCode};{ErrorCode};{CorrelationId};{SessionId};{ProcessName};{Message};{StackTrace}</li>
                </ul>
            </section>
            <section>
                <img src="./assets/OSIA_kibana.png" >
                <aside class="notes">
                </aside>
            </section>
        </section>
        <section>
            <section>
                <h1>Le POC Axa FR</h1>
                <img src="./assets/mvp.png" class="img-full" style="width: 90%;">
            </section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">‚ÄúLa cl√© de l'Observabilit√© c'est la donn√©e - mais elle n'est utile que si vous la structurez, la faites transiter et l'exploitez correctement‚Äù</h1>
                <aside class="notes">
                    <p>On instrumente pour diagnostiquer, mesurer, alerter et am√©liorer. Mais la cha√Æne se casse souvent ¬´ avant / dans / apr√®s ¬ª le collecteur. On va d√©tailler les pi√®ges et les bonnes pratiques sur chaque segment.</p>
                </aside>
            </section>
        </section>
        <section>
            <section class="section-title" data-background-image="./assets/avant.png" style="display: block;">
                <h1 style="color: #1973eb;">üîß Avant le collecteur</h1>
            </section>
            <section>
                <h1 style="color: #1973eb;">üìú Conventions et gouvernance</h1>
                <ul>
                    <li>D√©finir un sch√©ma unique pour service.name (ex : team.domain.service ou product-service-env)</li>
                    <li>Standards de tags/attributs : env, region, cluster, zone, version, owner, team</li>
                </ul>
                <p><pre><code data-trim data-noescape>
                  env:
                    - name: OTEL_SERVICE_NAME
                      value: "AFA@1234@1234-APISouscription"
                    - name: OTEL_NAMESPACE
                      valueFrom:
                        fieldRef:
                          fieldPath: metadata.namespace
                    - ...
                </code></pre></p>
                <aside class="notes">
                    Ubiquitous Language : service.name unique permet d'agr√©ger correctement
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üîó Propagation de contexte</h1>
                <ul>
                    <li><a target="_blank" href="https://w3c.github.io/trace-context/">W3C Trace Context</a> : v√©rifier que tous les frameworks et clients l'impl√©mentent</li>
                    <li>Baggage (utiliser avec parcimonie)</li>
                </ul>
                <aside class="notes">
                    Baggage : permet de propager des metadata business (ex: user-id, session-id) √† travers les services. 
                    <ul>
                        <li>Propagation globale : attention √† ne pas surcharger les headers HTTP</li>
                        <li>Performance : trop d'√©l√©ments peuvent impacter la latence et augmenter le co√ªt r√©seau</li>
                        <li>S√©curit√© : ne pas propager d'informations sensibles (ex : tokens, mots de passe)</li>
                        <li>Lisibilit√© : complexifie l'analyse des traces</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üß© Semantic Conventions</h1>
                <ul>
                    <li>Respecter les conventions OTel (HTTP, DB, RPC, messaging) pour faciliter les analyses cross-stack</li>
                    <li><a target="_blank" href="https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/">Semantic Conventions | OpenTelemetry</a></li>
                    <li>Exemples : 
                        <ul>
                            <li>http.method, http.url, http.status_code</li>
                            <li>db.system, db.name, db.statement</li>
                            <li>messaging.system, messaging.destination, messaging.message_id</li>
                        </ul>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Exemple : pour une requ√™te HTTP, utiliser les attributs standardis√©s comme http.method, http.url, http.status_code</li>
                        <li>Avantage : facilite la corr√©lation et l'agr√©gation des donn√©es entre diff√©rents services et outils</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">ü§ñ Auto-instrumentation vs ‚úçÔ∏è instrumentation manuelle</h1>
                <ul>
                    <li>Auto-instr: rapide, mais v√©rifier la qualit√© des spans auto-cr√©√©s (noms, attributes)</li>
                    <li>Manuelle: pour le business logic, durable et s√©mantique</li>
                    <li><a target="_blank" href="https://opentelemetry.io/docs/zero-code/java/spring-boot-starter/">Spring Boot starter | OpenTelemetry</a></li>
                </ul>
                <aside class="notes">
                    Besoin de compilation native, impact de l'overhead, pr√©sence d'un autre agent (ex: Dynatrace)
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üìà Metrics vs üìä Traces vs üìù Logs</h1>
                <ul>
                    <li>D√©cider ce qui rel√®ve de la m√©trique (agr√©gation de donn√©es), de la trace (flux de requ√™tes), ou du log (informations d√©taill√©es).</li>
                    <li>Exemple : pour surveiller le taux d'erreur, utiliser une m√©trique. Pour diagnostiquer une requ√™te lente, utiliser une trace. Pour comprendre un √©chec sp√©cifique, utiliser un log.</li>
                    <li>Un use case chez nous a √©t√© de cartographier au d√©marrage nos applications Spring en √©mettant un metric avec le nom de l'artifact, la version, etc...</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Metrics : pour les tendances et alertes (ex: taux d'erreur, latence moyenne)</li>
                        <li>Traces : pour le diagnostic d√©taill√© (ex: requ√™te sp√©cifique, flux de requ√™tes)</li>
                        <li>Logs : pour les d√©tails contextuels (ex: erreurs sp√©cifiques, √©v√©nements)</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üß™ü§ñ Test & CI</h1>
                <ul>
                    <li>Tests d'instrumentation (InMemorySpanExporter / assertions)</li>
                    <li>Contr√¥les en pipeline : v√©rification de pr√©sence de service.name et d'attributes critiques</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üîí S√©curit√© & privacy</h1>
                <ul>
                    <li>Ne pas loguer de donn√©es sensibles</li>
                    <li>Certificats et secrets pour exporter (OTLP TLS / tokens)</li>
                    <li>Network policies</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üöÄ Versioning & d√©ploiement</h1>
                <ul>
                    <li>Standardiser instrumentation starter (starter libs) pour homog√©n√©it√©</li>
                    <li>D√©finir un template Kubernetes avec les variables d'env</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üë®‚Äçüíª Developer experience</h1>
                <img src="./assets/wiki.png" class="img-right" style="width: 30%;">
                <ul>
                    <li>Tooling local : collector local/agent pour dev, debug facile</li>
                    <li>Documentation claire et exemples d'instrumentation</li>
                    <li>Formation et sensibilisation des devs</li>
                    <li>Centralisation pour simplifier l'acc√®s aux outils et aux ressources (ex: IDP, wiki)</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
        </section>
        <section>
            <section class="section-title" data-background-image="./assets/pendant.png" style="display: block;">
                <h1 style="color: #1973eb;">‚öôÔ∏è Le collecteur</h1>
            </section>
            <section>
                <h1 style="color: #1973eb;">üåê Topology de d√©ploiement</h1>
                <ul>
                    <li>No Collector vs Agent vs Collector centralis√©</li>
                    <li>Compromis : latence, r√©silience, co√ªt, isolation r√©seau</li>
                    <li><a target="_blank" href="https://opentelemetry.io/docs/collector/deployment/">Deployment | OpenTelemetry</a></li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">No Collector</h1>
                <img src="./assets/otel-sdk.svg" class="img-full">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">Agent</h1>
                <img src="./assets/otel-agent-sdk.svg">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">Gateway</h1>
                <img src="./assets/otel-gateway-sdk.svg" class="img-full">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <img src="./assets/collector.png" class="img-full">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">SPOF ?</h1>
                <ul>
                    <li>Tuning fin n√©cessaire pour le collector</li>
                    <li>Enorme throughput/volum√©trie sur une architecture centralis√©e</li>
                    <li>Que faire si un exporter tombe ? Backlog sur disque, dead-letter ?</li>
                    <li>Tester la charge d'ingestion √† l'avance (simuler du trafic) pour dimensionner les pipelines.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <img src="./assets/otel-collector.svg" class="img-full">
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üîå Receivers / ‚öôÔ∏è Processors / üì§ Exporters / üõ§Ô∏è Pipelines</h1>
                <ul>
                    <li>Receivers (OTLP gRPC/HTTP), processors (batch, memory_limiter, attributes, sampling), exporters (OTLP, Prometheus, Tempo, Loki).</li>
                    <li>S√©parer les pipelines traces/metrics/logs.</li>
                    <li>Configurer queued_retry + disk buffer pour absorber les pics et le backpressure.</li>
                    <li>Adapter la taille des batchs et le timeout selon la latence tol√©r√©e.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üé≤ Sampling (head vs tail)</h1>
                <ul>
                    <li>D√©finir un sampling ¬´ head ¬ª conservateur (ex: 1-10%) et planifier tail-based sampling c√¥t√© collector</li>
                    <li>Le sampler applique un pourcentage d'√©chantillonnage sur le TraceID et reconnait l'annotation sampling.priority</li>
                    <li>Vous n'aurez pas le m√™me besoin sur l'environnement de production par rapport √† l'environnement de d√©veloppement.</li>
                    <li><a target="_blank" href="https://opentelemetry.io/docs/concepts/sampling/">Sampling | OpenTelemetry</a></li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Head sampling : d√©cider de conserver ou non une trace au moment de sa cr√©ation (avant envoi au collector). Simple et efficace pour r√©duire le volume initial, mais peut manquer de contexte global.</li>
                        <li>Tail sampling : d√©cider de conserver ou non une trace apr√®s avoir vu son ensemble (apr√®s envoi au collector). Permet des d√©cisions plus inform√©es bas√©es sur le contexte complet, mais n√©cessite plus de ressources et de complexit√©.</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1>La configuration du collector - Receiver</h1>
                <pre data-id="code-animation">
							<code class="hljs shell" data-trim data-line-numbers="2-5|6-7">
								<script type="text/template">
								receivers:
								  otlp:
								    protocols:
								      grpc:
								        endpoint: collector:4317
								      http:
								        endpoint: collector:4318
								</script>
							</code>
						</pre>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1>La configuration du collector - Processor</h1>
                <pre data-id="code-animation">
							<code class="hljs shell" data-trim data-line-numbers="2-5|6-8|9-10|11-24|25-31|32-36"><script type="text/template">
								processors:
								  memory_limiter:
									check_interval: 1s
									limit_percentage: 50
									spike_limit_percentage: 30
								  batch:
									timeout: 1s
									send_batch_size: 1024
								  probabilistic_sampler:
									sampling_percentage: 10
								  tail_sampling:
									policies:
									- name: drop_noisy_traces_url
									string_attribute:
									    enabled_regex_matching: true
									    invert_match: true
									    key: url.path
									    values:
									    - \/metrics
									    - \/actuator*
									    - opentelemetry\.proto
									    - favicon\.ico
									    - \/health
									type: string_attribute
								  transform:
									error_mode: ignore
									metric_statements:
									  - context: metric
										statements:
										  - set(description, "Measure of memory committed.") where name == "jvm_memory_committed_bytes"
										  - set(description, "Measure of memory used.") where name == "jvm_memory_used_bytes"
								  resource:
									attributes:
									  - action: insert
										key: loki.resource.labels
										value: service.name
							</script></code>
						</pre>
                <aside class="notes">
                    <ul>
                        <li>memory_limiter : emp√™che le collector de consommer toute la m√©moire disponible</li>
                        <li>batch : regroupe les donn√©es pour r√©duire le nombre de requ√™tes sortantes</li>
                        <li>probabilistic_sampler : √©chantillonnage simple bas√© sur un pourcentage fixe</li>
                        <li>tail_sampling : √©chantillonnage avanc√© bas√© sur des r√®gles apr√®s avoir vu la trace compl√®te</li>
                        <li>transform : modifier ou enrichir les donn√©es (ex: ajouter des attributs, renommer des m√©triques)</li>
                        <li>resource : ajouter des attributs globaux √† toutes les donn√©es (ex: service.name, environment)</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1>La configuration du collector - Exporters</h1>
                <pre data-id="code-animation">
							<code class="hljs shell" data-trim data-line-numbers="2-5|6-9|10-29"><script type="text/template">
								exporters:
								  otlphttp:
									endpoint: loki:9096
									tls:
									  insecure: true
								  otlp/tempo:
									endpoint: tempo:4317
									tls:
									  insecure: true
								  prometheusremotewrite:
									add_metric_suffixes: true
									endpoint: "http://prometheus:9090/api/v1/write"
									max_batch_size_bytes: 8000
									remote_write_queue:
									  num_consumers: 5
									  queue_size: 4000
									resource_to_telemetry_conversion:
									  enabled: true
									retry_on_failure:
									  enabled: true
									  initial_interval: 200ms
									  max_elapsed_time: 60s
									  max_interval: 5s
									send_metadata: false
									target_info:
									  enabled: false
									timeout: 20s
									tls:
									  insecure: true
							</script></code>
						</pre>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1>La configuration du collector - Services</h1>
                <pre data-id="code-animation">
							<code class="hljs shell" data-trim data-line-numbers="2|3-6|8-16|17-25|26-34"><script type="text/template">
								service:
								  extensions: [health_check]
								  telemetry:
									metrics:
									  address: 0.0.0.0:8888
									  level: basic
								  pipelines:
									metrics:
									  receivers:
										- otlp
										- hostmetrics
									  processors:
										- transform
									  exporters:
										- otlp/elastic
										- prometheusremotewrite
									traces:
									  receivers:
										- otlp
									  processors:
										- batch
									  exporters:
										- otlp/elastic
										- otlp/jaeger
										- otlp/tempo
									logs:
									  receivers:
										- otlp
									  processors:
										- attributes
										- resource
									  exporters:
										- otlphttp
										- otlp/elastic
							</script></code>
						</pre>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üß† Memory & üñ•Ô∏è CPU limits</h1>
                <ul>
                    <li>Le collector consomme beaucoup de m√©moire si mal configur√© (tail sampling, grosses files d'attente).</li>
                    <li>D√©finir le bon nombre de replicas pour le collector en fonction de la charge attendue.</li>
                    <li>Configurer limits, requests, HPA/Cluster autoscaler.</li>
                    <li>Configurer la variable d'environnement GOMEMLIMIT <a target="_blank" href="https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/memorylimiterprocessor/README.md#best-practices">Best Practices | Memory Limiter Processor</a></li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            
            <section>
                <h1 style="color: #1973eb;">üßê Observability du collector</h1>
                <ul>
                    <li>Le collector doit exporter ses propres metrics, logs et endpoints de sant√©.</li>
                    <li>Scraper ou envoyer les metrics du collector vers Prometheus.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section data-background-iframe="./assets/observ_collector.jpeg" data-background-interactive>
            </section>
            <section>
                <h1 style="color: #1973eb;">üíæ Configuration as Code & ü§ñ CI</h1>
                <ul>
                    <li>Stocker la configuration du collector dans Git, d√©ployer via GitOps.</li>
                    <li>Utiliser Helm pour faciliter la gestion des configurations Kubernetes et des mises √† jour <a target="_blank" href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/main/charts/opentelemetry-collector/README.md">OpenTelemetry Collector Helm Chart</a></li>
                    <li><a target="_blank" href="https://www.otelbin.io/?#config=exporters%3A*N__otlp%2Ftempo%3A*N____endpoint%3A_*S%7Benv%3ATEMPO*_URL%7D*N____retry*_on*_failure%3A*N______enabled%3A_false*N____sending*_queue%3A*N______num*_consumers%3A_4*N______queue*_size%3A_4000*N____tls%3A*N______insecure%3A_true*N__otlphttp%3A*N____endpoint%3A_*S%7Benv%3ALOKI*_URL%7D*N____tls%3A*N______insecure%3A_true*N__otlphttp%2Fdynatrace%3A*N____timeout%3A_15s*N____retry*_on*_failure%3A*N______enabled%3A_true*N____endpoint%3A_*S%7Benv%3ADT*_ENDPOINT%7D*N____headers%3A*N______Authorization%3A_Api-Token_*S%7Benv%3ADT*_API*_TOKEN%7D*N____tls%3A*N______ca*_file%3A_%2Fetc%2Fssl%2Fcerts%2Fdynatrace-certificates.pem*N______insecure%3A_false*N______reload*_interval%3A_1h*N__prometheusremotewrite%3A*N____add*_metric*_suffixes%3A_true*N____endpoint%3A_*S%7Benv%3APROMETHEUS*_URL%7D*N____max*_batch*_size*_bytes%3A_8000*N____remote*_write*_queue%3A*N______num*_consumers%3A_5*N______queue*_size%3A_4000*N____resource*_to*_telemetry*_conversion%3A*N______enabled%3A_true*N____retry*_on*_failure%3A*N______enabled%3A_true*N______initial*_interval%3A_200ms*N______max*_elapsed*_time%3A_60s*N______max*_interval%3A_5s*N____send*_metadata%3A_false*N____target*_info%3A*N______enabled%3A_false*N____timeout%3A_20s*N____tls%3A*N______insecure%3A_true*Nextensions%3A*N__health*_check%3A*N____endpoint%3A_*S%7Benv%3AMY*_POD*_IP%7D%3A13133*Nprocessors%3A*N__attributes%2Fempty%3A*N____actions%3A*N____-_action%3A_delete*N______key%3A_empty*N______pattern%3A_%5E*Bs***S*N__batch%3A*N____send*_batch*_size%3A_8000*N____timeout%3A_500ms*N__cumulativetodelta%3A_null*N__groupbyattrs%3A_null*N__groupbytrace%3A_null*N__memory*_limiter%3A*N____check*_interval%3A_5s*N____limit*_mib%3A_1024*N____spike*_limit*_mib%3A_100*N__probabilistic*_sampler%3A*N____sampling*_percentage%3A_10*N__tail*_sampling%3A*N____policies%3A*N____-_name%3A_drop*_noisy*_traces*_url*N______string*_attribute%3A*N________enabled*_regex*_matching%3A_true*N________invert*_match%3A_true*N________key%3A_url.path*N________values%3A*N________-_*B%2Fmetrics*N________-_*B%2Factuator***N________-_opentelemetry*B.proto*N________-_favicon*B.ico*N________-_*B%2Fhealth*N______type%3A_string*_attribute*N____-_name%3A_drop*_noisy*_traces*_target*N______string*_attribute%3A*N________enabled*_regex*_matching%3A_true*N________invert*_match%3A_true*N________key%3A_http.target*N________values%3A*N________-_*B%2Fmetrics*N________-_*B%2Factuator***N________-_opentelemetry*B.proto*N________-_favicon*B.ico*N________-_*B%2Fhealth*N______type%3A_string*_attribute*N__transform%3A*N____error*_mode%3A_ignore*N____metric*_statements%3A*N____-_context%3A_metric*N______statements%3A*N______-_set*Cdescription%2C_%22Measure_of_memory_committed.%22*D_where_name_*E*E_%22jvm*_memory*_committed*_bytes%22*N______-_set*Cdescription%2C_%22Measure_of_memory_used.%22*D_where_name_*E*E_%22jvm*_memory*_used*_bytes%22*Nreceivers%3A*N__hostmetrics%3A*N____collection*_interval%3A_1m*N____scrapers%3A*N______cpu%3A_null*N______load%3A_null*N______memory%3A_null*N__otlp%3A*N____protocols%3A*N______grpc%3A*N________endpoint%3A_*S%7Benv%3AMY*_POD*_IP%7D%3A4317*N______http%3A*N________endpoint%3A_*S%7Benv%3AMY*_POD*_IP%7D%3A4318*Nservice%3A*N__extensions%3A*N__-_health*_check*N__pipelines%3A*N____logs%3A*N______exporters%3A*N______-_otlphttp*N______-_otlphttp%2Fdynatrace*N______processors%3A*N______-_memory*_limiter*N______-_batch*N______-_attributes%2Fempty*N______receivers%3A*N______-_otlp*N____metrics%3A*N______exporters%3A*N______-_prometheusremotewrite*N______processors%3A*N______-_memory*_limiter*N______-_batch*N______-_groupbyattrs*N______-_transform*N______receivers%3A*N______-_otlp*N______-_hostmetrics*N____metrics%2Fdynatrace%3A*N______exporters%3A*N______-_otlphttp%2Fdynatrace*N______processors%3A*N______-_memory*_limiter*N______-_batch*N______-_groupbyattrs*N______-_transform*N______-_cumulativetodelta*N______receivers%3A*N______-_otlp*N____traces%3A*N______exporters%3A*N______-_otlp%2Ftempo*N______-_otlphttp%2Fdynatrace*N______processors%3A*N______-_memory*_limiter*N______-_groupbytrace*N______-_batch*N______-_groupbyattrs*N______-_tail*_sampling*N______receivers%3A*N______-_otlp*N__telemetry%3A*N____metrics%3A*N______readers%3A*N______-_pull%3A*N__________exporter%3A*N____________prometheus%3A*N______________host%3A_0.0.0.0*N______________port%3A_8888%7E">Outils de visualisation de la configuration de votre collecteur | OTelBin</a></li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
        </section>
        <section>
            <section class="section-title" data-background-image="./assets/apres.png" style="display: block;">
                <h1 style="color: #1973eb;">üîé Apr√®s le collecteur</h1>
            </section>
            <section>
                <h1 style="color: #1973eb;">üóÇÔ∏è Backends & r√¥les</h1>
                <p>La jungle du <a target="_blank" href="https://landscape.cncf.io/?group=projects-and-products&view-mode=grid&category=Observability+and+Analysis">CNCF landscape</a></p>
                <ul>
                    <li>Metrics ‚Üí Prometheus (court/long terme via remote write), Cortex/Mimir pour le passage √† l'√©chelle.</li>
                    <li>Traces ‚Üí Tempo / Jaeger / Zipkin / solutions commerciales (New Relic, Datadog).</li>
                    <li>Logs ‚Üí Loki / ELK / solutions commerciales (Splunk, Datadog).</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üóÑÔ∏è R√©tention & üí∏ Optimisation des co√ªts</h1>
                <ul>
                    <li>Politiques de r√©tention selon le type de donn√©e (metrics : long terme ; traces : court terme + archivage ; logs : court terme + indexation).</li>
                    <li>Archivage long terme dans un object storage (S3, Blob Storage).</li>
                    <li>Probl√©matique Disaster Recory si une chaine d'appel se retrouve r√©partie sur 2 r√©gions.</li>
                    <li>RGPD, data residency : masquer/supprimer certains attributs, g√©rer la r√©tention en cons√©quence.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üîó Requ√™tes & corr√©lation</h1>
                <ul>
                    <li>Corr√©lation trace ‚Üî logs ‚Üî metrics via trace_id / span_id / labels.</li>
                    <li>Dashboards (Grafana) sur les SLO/SLA, percentiles de latence, taux d'erreur.</li>
                    <li>Pr√©voir de l'alerting g√©n√©rique bas√© sur les SLOs (burn rates, seuils d'alerte)</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üîí S√©curit√© & üõÇ contr√¥le d'acc√®s</h1>
                <ul>
                    <li>RBAC sur les dashboards et traces.</li>
                    <li>Masquage des PII (Personally Identifiable Information).</li>
                    <li>Audit logs.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
            <section>
                <h1 style="color: #1973eb;">üìâ Analytique avanc√©e & ü§ñ ML</h1>
                <ul>
                    <li>Utiliser traces/metrics pour la d√©tection d'anomalies, la planification de capacit√©, la classification des causes racines.</li>
                </ul>
                <aside class="notes">
                </aside>
            </section>
        </section>
        <section>
            <section class="section-title" data-background-image="./assets/A38.jpeg" style="display: block;">
                <h1 style="color: #1973eb;">En dehors de la partie technique</h1>
            </section>
            <section>
                <h1 style="color: #1973eb;">Votre DSI a un historique</h1>
                <ul>
                    <li>Le passage en radar des techno vous sera s√ªrement demand√©.</li>
                    <li>Des outils sont d√©j√† en place.</li>
                    <li>Une √©quipe de Suivi de Production existe.</li>
                </ul>
            </section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">OpenTelemetry va remplacer Dynatrace ? Kibana ? Etc..</h1>
                <aside class="notes">
                    <ul>
                        <li>A chaque fois que l'on a pr√©sent√© OTEL, on a toujours ouvert le d√©bat sur la fa√ßon d'exploiter</li>
                        <li>Alors que le collector est au centre de l'√©quation et permet de distribuer agnostiquement les donn√©es de t√©l√©m√©trie</li>
                        <li>Peu visible</li>
                        <li>Mal compris</li>
                        <li>Super utile</li>
                        <li>Non vendor locked</li>
                    </ul>
                </aside>
            </section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">Gagnant, gagnant</h1>
                <p><a target="_blank" href="https://opentelemetry.io/ecosystem/vendors/" target="_blank">Vendors | OpenTelemetry</a></p>
                <aside class="notes">
                    <ul>
                        <li>Les vendeurs de solutions payantes tablent sur l'exploitation des donn√©es et leur visualisation</li>
                        <li>On a moins peur de prendre une licence car le protocole et le format de la donn√©e devient standard</li>
                    </ul>
                </aside>
            </section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">Quelques points n√©gatifs</h1>
            </section>
            <section>
                <h1 style="color: #1973eb;">OpenTelemetry + Green IT</h1>
                <ul>
                    <li>Les donn√©es d'instrumentation rentrent dans la balance des √©changes r√©seau</li>
                    <li>Attention √† ne pas tout observer par d√©faut.</li>
                    <li>Le sampling est votre ami.</li>
                    <li>Le fait de centraliser plut√¥t que chaque process embarque son agent et son jeu de data sp√©cifique va quand m√™me dans le bon sens.</li>
                </ul>
            </section>
        </section>
        <section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">R√©capitulatif</h1>
                <aside class="notes">
                    <ul>
                        <li>Il n'y a pas d'alternative √† OpenTelemetry, c'est le standard de facto</li>
                        <li>Si on ne bascule pas sur le standard, on va se retrouver avec des solutions propri√©taires</li>
                        <li>Aculturation des √©quipes</li>
                        <li>Instrumentation rigoureuse et coh√©rente</li>
                        <li>Collector bien dimensionn√© et r√©silient</li>
                        <li>Backends adapt√©s aux besoins et aux co√ªts</li>
                        <li>Ne pas oublier les aspects humains et organisationnels</li>
                    </ul>
                </aside>
            </section>
            <section class="section-conclusion center">
                <h1 style="color: #1973eb;">Merci !</h1>
            </section>
        </section>
    </div>
</div>


<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/notes/notes.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/markdown/markdown.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.min.js"></script>-->
<script src="./js/reveal.min.js"></script>
<script src="./js/notes.min.js"></script>
<script src="./js/markdown.min.js"></script>
<script src="./js/highlight.min.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        hashOneBasedIndex: true,
        respondToHashChanges: true,
        history: true,
        width: 1280,
        height: 720,
        autoPlayMedia: true,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
</script>
</body>
</html>
